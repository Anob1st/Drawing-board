<canvas id="board" width="800" height="600" style="border:2px solid black;"></canvas>
<select id="tool">
  <option value="brush">Brush</option>
  <option value="circle">Circle</option>
  <option value="rectangle">Rectangle</option>
  <option value="line">Line</option>
  <option value="fill">Fill</option>
</select>
<input type="color" id="color" value="#000000">
<input type="range" id="size" min="1" max="30" value="5">
<button id="clear">Clear</button>

<script>
const canvas = document.getElementById("board");
const ctx = canvas.getContext("2d");
let drawing=false, startX=0, startY=0;

const tool = document.getElementById("tool");
const color = document.getElementById("color");
const size = document.getElementById("size");

function getPos(e){
  const rect = canvas.getBoundingClientRect();
  if(e.touches) return {x:e.touches[0].clientX-rect.left, y:e.touches[0].clientY-rect.top};
  return {x:e.offsetX, y:e.offsetY};
}

canvas.addEventListener("mousedown", e => { drawing=true; const pos=getPos(e); startX=pos.x; startY=pos.y; });
canvas.addEventListener("mouseup", e => { drawShape(getPos(e)); drawing=false; });
canvas.addEventListener("mousemove", e => { if(drawing && tool.value=="brush") drawShape(getPos(e)); });

canvas.addEventListener("touchstart", e => { e.preventDefault(); drawing=true; const pos=getPos(e); startX=pos.x; startY=pos.y; });
canvas.addEventListener("touchmove", e => { e.preventDefault(); if(drawing && tool.value=="brush") drawShape(getPos(e)); });
canvas.addEventListener("touchend", e => { drawing=false; });

function drawShape(pos){
  ctx.strokeStyle=color.value;
  ctx.fillStyle=color.value;
  ctx.lineWidth=size.value;
  ctx.beginPath();
  switch(tool.value){
    case "brush":
      ctx.lineCap="round";
      ctx.moveTo(startX,startY);
      ctx.lineTo(pos.x,pos.y);
      ctx.stroke();
      startX=pos.x; startY=pos.y;
      break;
    case "line":
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.moveTo(startX,startY);
      ctx.lineTo(pos.x,pos.y);
      ctx.stroke();
      break;
    case "rectangle":
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.strokeRect(Math.min(startX,pos.x), Math.min(startY,pos.y), Math.abs(pos.x-startX), Math.abs(pos.y-startY));
      break;
    case "circle":
      ctx.clearRect(0,0,canvas.width,canvas.height);
      let r = Math.sqrt((pos.x-startX)**2+(pos.y-startY)**2);
      ctx.arc(startX,startY,r,0,2*Math.PI);
      ctx.stroke();
      break;
    case "fill":
      ctx.fillRect(0,0,canvas.width,canvas.height);
      break;
  }
}

document.getElementById("clear").onclick=()=>ctx.clearRect(0,0,canvas.width,canvas.height);
</script>
